(this.webpackJsonprevolut=this.webpackJsonprevolut||[]).push([[0],{50:function(e,t,a){e.exports=a(65)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);a(51);var n,o=a(0),c=a.n(o),r=a(36),s=a(6),u=a.n(s),i=(a(61),a(62),a(32)),l=a(33),m=a(38),p=a(34),h=a(39),d=a(19),k=a(98),E=function(e){var t=e.pocketFrom,a=e.pocketTo;return{type:"EXCHANGE",pocketFrom:t,totalFrom:e.totalFrom,pocketTo:a,totalTo:e.totalTo}},f=function(e){return{type:"SELECT_POCKET_FROM",pocket:e}},g=function(e){return{type:"SELECT_POCKET_TO",pocket:e}},v=function(e){return function(t){n&&clearInterval(n),n=setInterval((function(){fetch("".concat("https://api.exchangeratesapi.io").concat("/latest","?base=").concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"RECEIVE_RATES",rates:e.rates})})).catch((function(e){console.error(e)}))}),1e3)}};function C(e,t){var a=b(t(parseFloat(e)));return Number.isNaN(a)?"0.00":a.toString()}function b(e){var t=parseFloat(parseFloat(e).toFixed(2));return Number.isNaN(t)?0:t}var F=function(e,t){return(e&&e[t])*(a=.9,n=1.1,Math.random()*(n-a)+a)||1;var a,n},T=a(4),O=(Object(T.shape)({id:T.string.isRequired,name:T.string.isRequired,currency:T.string.isRequired,amount:T.number.isRequired}),a(94)),P=a(99),y=a(100),j=a(101),N=(a(63),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleAmountChange=function(e){a.props.onValueChange(e.target.value)},a.handlePocketChange=function(e){var t=a.props.pockets.find((function(t){return t.id===e.target.value}));a.props.onPocketChange(t)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.amount,a=e.total,n=e.pockets,o=e.isFromPocket,r=e.selectedPocket,s=o?"from":"to",u=o?"-":"+";return c.a.createElement("div",{className:"pocket","data-testid":"pocket-".concat(s)},c.a.createElement("div",{className:"label","data-testid":"label"},s.toUpperCase()),c.a.createElement(O.a,null,c.a.createElement(y.a,{id:"pocket"},s," pocket "),c.a.createElement(P.a,{labelId:"pocket",className:"select",value:r.id||"",onChange:this.handlePocketChange},n.map((function(e){return c.a.createElement(j.a,{value:e.id,key:e.id},e.name)})))),c.a.createElement("div",{className:"amount"},c.a.createElement("input",{className:"amount-input",type:"number",value:t,min:"0",onChange:this.handleAmountChange,"data-testid":"amount-input"}),c.a.createElement("span",{className:"amount-currency"},r.currency)),c.a.createElement("div",{className:"calculation","data-testid":"calculation"},c.a.createElement("span",null,r.amount||0),c.a.createElement("span",{className:"diff".concat(u)}," ",u," ",t||0),c.a.createElement("span",{className:"diff".concat(u," total")}," = ",a),c.a.createElement("span",null,r.currency)))}}]),t}(c.a.Component)),x=(a(64),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handlePocketFromChange=function(e){a.props.selectPocketFrom(e),a.props.fetchRates(e.currency)},a.handlePocketToChange=function(e){a.props.selectPocketTo(e)},a.handleAmountFromChange=function(e){a.setState({isFromPersistent:!0,amount:e})},a.handleAmountToChange=function(e){a.setState({isFromPersistent:!1,amount:e})},a.state={amount:"0.00",isFromPersistent:!0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pockets,a=e.exchangeRate,n=e.pocketFrom,o=e.pocketTo,r=e.exchange,s=this.state,u=s.isFromPersistent,i=s.amount,l=b(u?i:C(i,(function(e){return e/a}))),m=b(u?C(i,(function(e){return e*a})):i),p=b(parseFloat(n.amount||0)-(l||0)),h=b(parseFloat(o.amount||0)+(m||0)),d=l>0&&m>0&&o.id!==n.id&&p>0;return c.a.createElement("div",{className:"exchange-widget"},c.a.createElement(N,{isFromPocket:!0,pockets:t,selectedPocket:n,amount:l.toString(),total:p,onPocketChange:this.handlePocketFromChange,onValueChange:this.handleAmountFromChange}),c.a.createElement("div",{className:"exchange"},c.a.createElement("span",{className:"exchange-rate-label"},"Exchange rate"),c.a.createElement("div",{className:"exchange-rate"},"100 ",n.currency," = ",(100*a).toFixed(2)," ",o.currency),c.a.createElement(k.a,{variant:"contained",color:"primary",disabled:!d,"data-testid":"exchange",onClick:function(){r({pocketFrom:n,totalFrom:p,pocketTo:o,totalTo:h})}},"Exchange")),c.a.createElement(N,{pockets:t,selectedPocket:o,amount:m.toString(),total:h,onPocketChange:this.handlePocketToChange,onValueChange:this.handleAmountToChange}))}}]),t}(c.a.Component)),R=Object(r.b)((function(e){return{pockets:e.pockets,pocketFrom:e.pocketFrom,pocketTo:e.pocketTo,rates:e.rates,exchangeRate:e.exchangeRate}}),(function(e){return Object(d.b)({fetchRates:v,selectPocketFrom:f,selectPocketTo:g,exchange:E},e)}))(x);var A=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(R,null))},S=a(24),_=a(45),I={exchangeRate:1,pockets:[{id:"1",name:"pocket1",currency:"USD",amount:134.87},{id:"2",name:"pocket2",currency:"EUR",amount:14.11},{id:"3",name:"pocket3",currency:"GBP",amount:412.32}],pocketFrom:{},pocketTo:{}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;arguments.length>2&&arguments[2];switch(t.type){case"SELECT_POCKET_FROM":return Object(S.a)({},e,{pocketFrom:t.pocket});case"SELECT_POCKET_TO":return Object(S.a)({},e,{pocketTo:t.pocket,exchangeRate:F(e.rates,t.pocket.currency)});case"RECEIVE_RATES":return Object(S.a)({},e,{rates:t.rates,exchangeRate:F(t.rates,e.pocketTo.currency)});case"EXCHANGE":var a=Object(S.a)({},t.pocketFrom,{amount:t.totalFrom}),n=Object(S.a)({},t.pocketTo,{amount:t.totalTo}),o=e.pockets.map((function(e){return e.id===a.id?a:e.id===n.id?n:e}));return Object(S.a)({},e,{pocketFrom:a,pocketTo:n,pockets:o});default:return e}},V=Object(d.c)(w,I,Object(d.a)(_.a));u.a.render(c.a.createElement(r.a,{store:V},c.a.createElement(A,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.465449a3.chunk.js.map